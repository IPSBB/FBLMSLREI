<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="report_margin_selling_products">
        <t t-call="web.html_container">
            <t t-call="web.external_layout">
                <div class="page">
                    <div class="text-center">
                        <h2>Selling Products Details</h2>
                    </div>
                    <table class="table table-lg">
                        <tbody>
                            <tr>
                                <td>Report Date:</td>
                                <td style="text-align: right;">
                                    <t t-esc="today"
                                       t-options='{"widget": "date"}'/>
                                </td>
                            </tr>
                            <tr>
                                <td>Report Time:</td>
                                <td style="text-align: right;">
                                    <t t-esc="today"
                                       t-options='{"widget": "datetime",  "time_only": True}'/>
                                </td>
                            </tr>
                            <tr t-if="pos_session_id">
                                <td>POS Session:</td>
                                <td style="text-align: right;">
                                    <t t-esc="pos_session_id.name"/>
                                </td>
                            </tr>
                            <tr t-if="start_date">
                                <td>Start Date:</td>
                                <td style="text-align: right;">
                                    <t t-esc="start_date"/>
                                </td>
                            </tr>
                            <tr t-if="end_date">
                                <td>End Date:</td>
                                <td style="text-align: right;">
                                    <t t-esc="end_date"/>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <br/>
                    <table class="table table-lg">
                        <thead>
                            <th style="text-align: center;">Product</th>
                            <th style="text-align: center;">Barcode</th>
                            <th style="text-align: center;">Quantity</th>
                            <th style="text-align: right;">Unit</th>
                            <th style="text-align: right;">Cost</th>
                            <th style="text-align: right;">Price</th>
                            <th style="text-align: right;">Margin</th>
                            <th style="text-align: center;">Total Margin</th>
                        </thead>
                        <tbody>
                            <tr t-foreach="products" t-as="product">
                                <td style="text-align: center;">
                                    <t t-if="product['code']">[<t
                                            t-esc="product['code']"/>]
                                    </t>
                                    <t t-esc="product['name']['en_US']"/>
                                </td>
                                <td style="text-align: center;">
                                    <t t-esc="product['barcode'] or '-'"/>
                                </td>
                                <td style="text-align: center;">
                                    <t t-esc="product['qty']"/>
                                </td>
                                <td style="text-align: right;">
                                    <t t-esc="product['uom']['en_US']"/>
                                </td>
                                <td style="text-align: right;">
                                    <t t-esc="product['cost']"/>
                                </td>
                                <td style="text-align: right;">
                                    <t t-esc="product['price']"/>
                                </td>
                                <td style="text-align: right;">
                                    <t t-esc="product['margin']"/>
                                </td>
                                <td style="text-align: center;">
                                    <t t-esc="product['total_margin']"/>
                                </td>
                            </tr>
                        </tbody>
                        <tfoot>
                            <tr style="font-weight: bold; background-color: #f2f2f2;">
                                <td colspan="2" style="text-align: right;">Total:</td>
                                <td style="text-align: center;">
                                    <t t-esc="total_quantity"/>
                                </td>
                                <td colspan="3"></td>
                                <td style="text-align: right;">
                                    <t t-esc="total_margin"/>
                                </td>
                                <td style="text-align: center;">
                                    <t t-esc="total_margin_sum"/>
                                </td>
                            </tr>
                        </tfoot>
                    </table>
                </div>
            </t>
        </t>
    </template>
</odoo>